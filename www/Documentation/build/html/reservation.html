<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Réservations &mdash; Documentation Documentation développeur ICA 1.0</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Registre Hygiene" href="registrehygiene.html" />
    <link rel="prev" title="Offres" href="offre.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Documentation développeur ICA
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Le dossier App</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="app.html">App</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Public</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="annuaire.html">Annuaire</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="theses.html">Theses</a></li>
<li class="toctree-l1"><a class="reference internal" href="fichiersPublic.html">Fichiers Public</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Intranet</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="equipement.html">Equipement</a></li>
<li class="toctree-l1"><a class="reference internal" href="formulaire.html">Formulaire</a></li>
<li class="toctree-l1"><a class="reference internal" href="offre.html">Offres</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Réservations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#events">Events</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#les-fonctions">Les fonctions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#month">Month</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nouvelle-reservation">Nouvelle Réservation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="registrehygiene.html">Registre Hygiene</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">Stats</a></li>
<li class="toctree-l1"><a class="reference internal" href="zrr.html">ZRR</a></li>
<li class="toctree-l1"><a class="reference internal" href="gestiontheses.html">Theses</a></li>
<li class="toctree-l1"><a class="reference internal" href="fichiersIntranet.html">Fichiers Intranet</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Documentation développeur ICA</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Réservations</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/reservation.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="reservations">
<h1>Réservations<a class="headerlink" href="#reservations" title="Lien permanent vers ce titre"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Nous allons voir ici la page la plus complexe de tout le site, il est conseillé d’utiliser une recherche navigateur (ctrl+f) pour
retrouver plus facilement les informations qui vous sont nécéssaires.</p>
</div>
<div class="section" id="events">
<h2>Events<a class="headerlink" href="#events" title="Lien permanent vers ce titre"></a></h2>
<p>Ce fichier permet de récupérer les événements (réservations) en fonction de différentes options.
Ce fichier est utilisé dans <em>afficherjournee.php</em> , <em>calendrier.php</em> , <em>getCalendrier.php</em> , <em>getTableau.php</em> , <em>GetMoyen.php</em> , <em>mesReservation.php</em> , <em>supprimerReservation.php</em> , <em>tableauReservation.php</em> et <em>voirReservation.php</em> .
Ce fichier import <em>GestionBdd.php</em> qui va permettre d’envoyer les requêtes.</p>
<div class="section" id="les-fonctions">
<h3>Les fonctions<a class="headerlink" href="#les-fonctions" title="Lien permanent vers ce titre"></a></h3>
<p><strong>getEventsBetween</strong> : Récupère les évènements qui sont entre deux dates.</p>
<p><strong>getEventsBetweenByDay</strong> : Récupère les évènements qui sont entre 2 dates indexé par jour.
Il appelle la fonction <strong>getEventsBetween</strong> contenu dans <em>Events.php</em> .
Pour chaque événement entre les deux dates, on récupère la date de début de l’événement et la date de fin et toutes les autres dates entre date de début et de fin que l’on renvoie.</p>
<p><strong>getEventsBetweenByDayByMoyen</strong> : Récupère les évènements qui sont entre 2 dates indexé par jour et par moyen.
Il appelle la fonction <strong>dateDansUnMoisParMoyen</strong> contenu dans <em>GestionBdd.php</em>.
Pour chaque événement entre les deux dates, on récupère la date de début de l’événement et la date de fin et toutes les autres dates entre date de début et de fin que l’on renvoie.</p>
<p><strong>getEventByDayandCategorie</strong> :Cherche un événement en fonction du jour et d’une catégorie donné.
Il appelle la fonction <strong>getParJourEtCategorie</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getEventByDayandMoyen</strong> :Cherche un événement en fonction du jour et d’un moyen donné.
Il appelle la fonction <strong>getParJourEtMoyen</strong> contenu dans <em>GestionBdd.php</em> et renvoie le résultat.</p>
<p><strong>getEventById</strong> :Cherche un événement par son Id .
Il appelle la fonction <strong>getRéservationById</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getMoyenByCategorie</strong> :Cherche tous les moyens de la catégorie.
Il appelle la fonction <strong>getMoyenCategorie</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getResponsable</strong> :Cherche tous les responsables d’un moyen.
Il appelle la fonction <strong>getResponsableParMoyen</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>deleteEventById</strong> :Supprimer une réservation par son ID.
Il appelle la fonction <strong>deleteReservationById</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getEventByName</strong> :Cherche tous les événements en fonction de son titre.
Il appelle la fonction <strong>getReservationByNom</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getEventByName</strong> :Cherche tous les événements en fonction de son titre.
Il appelle la fonction <strong>getReservationByNom</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getEventsByCategorie</strong> :Cherche tous les événements en fonction de la catégorie du moyen.
Il appelle la fonction <strong>getReservationParCatégorie</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getEventsByCategorieAndUser</strong> :Cherche tous les événements en fonction de la catégorie du moyen et l’utilisateur.
Il appelle la fonction <strong>getReservationParCatégorieEtUtilisateur</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getEventsByMoyen</strong> :Cherche tous les événements en fonction du moyen.
Il appelle la fonction <strong>getReservationParMoyen</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getEventsByMoyenAndUser</strong> :Cherche tous les événements en fonction du moyen.
Il appelle la fonction <em>getReservationParMoyenEtUtilisateur</em> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>afficherLesCategorie</strong> :Cherche toutes les catégorie.
Il appelle la fonction <strong>getCategorie</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getUtiEventsByMoyen</strong> :Cherche tous les utilisateurs qui ont réservés le moyen donné.
Il appelle la fonction <strong>getUtiReservationParMoyen</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>getUtiEventsByCategorie</strong> :Cherche tous les utilisateurs qui ont réservé un moyen de la catégorie donné.
Il appelle la fonction <strong>getUtiReservationParCatégorie</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
</div>
</div>
<div class="section" id="month">
<h2>Month<a class="headerlink" href="#month" title="Lien permanent vers ce titre"></a></h2>
<p>Ce fichier permet de récupérer le mois, de connaitre son nombre de semaines et de jours.
Ce fichier est utilisé dans <em>calendrier.php</em> .
Ce fichier import lang-fr ou lang-en en fonction de la langue sélectionner qui va permettre de changer la langue grâce aux variables TXT.
Cette classe à 4 attributs.</p>
<ul class="simple">
<li><p><em>$days</em> qui corresponds au jours de la semaine.</p></li>
<li><p><em>$months</em> représente les mois de l’année.</p></li>
<li><p><em>$month</em> le mois sélectionner.</p></li>
<li><p><em>$year</em> l’année sélectionner.</p></li>
</ul>
<p><strong>Constructeur</strong> : à en paramètre le numéro du mois et l’année pour déterminer le nombre de jour dans le mois.</p>
<p><strong>getDays</strong> : récupère <em>$days</em>.</p>
<p><strong>getMonth</strong> : récupère <em>$month</em>.</p>
<p><strong>getYear</strong> : récupère <em>$year</em>.</p>
<p><strong>getStartDay</strong> : retourne le premier jour du mois .</p>
<p><strong>toString</strong> : retourne le mois et l’année sous forme de chaine de caractère.</p>
<p><strong>getWeeks</strong> : retourne le nombre de semaine.</p>
<p><strong>withinMouth</strong> : récupère les jours qui ne sont pas dans le mois mais dans les même semaine que le premier jour et le dernière jour du mois.</p>
<p><strong>nextMonth</strong> : passe au mois suivant $month prend +1 et si $month = 12 alors il retourne à 1.</p>
<p><strong>previousMonth</strong> : passe au mois précédent $month prend -1 et si $month = 1 alors il retourne à 12.</p>
</div>
<div class="section" id="nouvelle-reservation">
<h2>Nouvelle Réservation<a class="headerlink" href="#nouvelle-reservation" title="Lien permanent vers ce titre"></a></h2>
<p>Ce fichier permet de vérifier les différentes exceptions pour la création ou la modification d’une réservation.
Ce fichier est utilisé dans <em>ajouterReservation.php</em> et <em>ModifierReservation.php</em> .
Ce fichier import <em>GestionBdd.php</em> qui va permettre d’envoyer les requêtes.</p>
<p><strong>Chevauchement2jours</strong> : Vérifie si la date de début de la réservation est supérieure à la date de fin.
Si la date de début et supérieur à la date de fin la fonction renvoie true.
Sinon renvoie false.</p>
<p><strong>Chevauchement2heures</strong> : Vérifie si l’heure de début de la réservation est supérieure à l’heure de fin.
Si l’heure de début et supérieur à l’heure de fin la fonction renvoie true.
Sinon renvoie false.</p>
<p><strong>CreationReservation</strong> : créer la réservation dans la bdd.
Récupère toutes les infos pour créer une réservation.
Appel la fonction <strong>fusionDateEtHeure</strong> de <em>NouvelleReservation.php</em> .
Appel la fonction <strong>creerReservation</strong> de <em>GestionBdd.php</em> .
Renvoie true si tout est bon.</p>
<p><strong>chevauchementMemeMoyen</strong> : vérifie si le moyen de la réservation n’est pas déjà réserver pendant l’intervalle.
Appel la fonction <strong>fusionDateEtHeure</strong> de <em>NouvelleReservation.php</em> .
Récupère la date de début et on ajoute 1 minute.
Récupère la date de fin et on enlève 1 minute.
Appel la fonction <strong>verificationChevauchementMemeMoyen</strong> de <em>GestionBdd.php</em> et la renvoie.</p>
<p>chevauchementMemeUtilisateur : vérifie si l’utilisateur de la réservation n’a pas déjà réserver pendant l’intervalle.
Appel la fonction <strong>fusionDateEtHeure</strong> de NouvelleReservation.php.
Récupère la date de début et on ajoute 1 minute.
Récupère la date de fin et on enlève 1 minute.
Appel la fonction <strong>verificationChevauchementMemeUtilisateur</strong> de <em>GestionBdd.php</em> et la renvoie.</p>
<p><strong>fusionDateEtHeure</strong> : fusionne la date et l’heure pour faire un type DATETIME et renvoie le datetime.</p>
<p><strong>separeDateEtHeure</strong> :  sépare la date et l’heure pour avoir un type Date et l’autre Time et renvoie les deux type dans un tableau.</p>
<p><strong>getMoyenParCategorie</strong> : Recherche les moyens en fonction de leur catégorie.
Appel la fonction <strong>getMoyensCategorie</strong> de <em>GestionBdd.php</em> et la renvoie.</p>
<p><strong>afficherLesEncadrant</strong> : Recherche les encadrants possible.
Appel la fonction getEncadrantPossible de <em>GestionBdd.php</em> et la renvoie.</p>
<p><strong>getEventById</strong> : Recherche une réservation en fonction de son Id.
Appel la fonction getReservationById de <em>GestionBdd.php</em> et la renvoie.</p>
<p><strong>modifierReservation</strong> : modifie la réservation dans la bdd.
Récupère toutes les infos pour créer une réservation.
Appel la fonction <strong>fusionDateEtHeure</strong> de <em>NouvelleReservation.php</em> .
Appel la fonction <strong>updateReservationById</strong> de <em>GestionBdd.php</em> et la renvoie.</p>
<p><strong>chevauchementMemeMoyenIdDifferent</strong> : vérifie si le moyen de la réservation n’est pas déjà réserver pendant l’intervalle sans compter les réservations qui ont le même Id.
Appel la fonction <strong>fusionDateEtHeure</strong> de <em>NouvelleReservation.php</em> .
Récupère la date de début et on ajoute 1 minute.
Récupère la date de fin et on enlève 1 minute.
Appel la fonction <strong>verificationChevauchementMemeMoyenIdDifferent</strong> de <em>GestionBdd.php</em> et la renvoie.</p>
<p><strong>chevauchementMemeUtilisateur</strong> : vérifie si l’utilisateur de la réservation n’a pas déjà réserver pendant l’intervalle sans compter les réservations qui ont le même Id.
Appel la fonction <strong>fusionDateEtHeure</strong> de <em>NouvelleReservation.php</em> .
Récupère la date de début et on ajoute 1 minute.
Récupère la date de fin et on enlève 1 minute.
Appel la fonction <strong>verificationChevauchementMemeUtilisateurIdDifferent</strong> de <em>GestionBdd.php</em> et la renvoie.</p>
<p><strong>envoieMailAjout</strong> : Envoie un mail au responsable pour chaque ajout d’une réservation.
Récupère toutes les infos de la réservation.
Appel la fonction <strong>getResponsableParMoyen</strong> de <em>GestionBdd.php</em>.
Appel la fonction <strong>RechercheMailResponsable</strong> de <em>GestionBdd.php</em>.
Envoie le mail au différent responsable récupérer via RechercheMailResponsable.</p>
<p><strong>afficherLesCategorie</strong> :Cherche toutes les catégorie.
Il appelle la fonction <strong>getCategorie</strong> contenu dans <em>GestionBdd.php</em> renvoie le résultat.</p>
<p><strong>envoieMailModif</strong> : Envoie un mail au responsable pour chaque modification d’une réservation.
Récupère toutes les infos de la réservation.
Appel la fonction <strong>getResponsableParMoyen</strong> de <em>GestionBdd.php</em>.
Appel la fonction <strong>rechercheMailResponsable</strong> de <em>GestionBdd.php</em>.
Envoie le mail au différent responsable récupérer via RechercheMailResponsable.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="offre.html" class="btn btn-neutral float-left" title="Offres" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="registrehygiene.html" class="btn btn-neutral float-right" title="Registre Hygiene" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Henrique.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>